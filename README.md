# 藥師咒助念器

一個專為藥師咒助念設計的現代化網頁應用程式，提供影片播放、計數器功能和進度記憶。

## 最新更新 (2024)

### 🎯 智能時間記憶功能
- **避免初始載入時儲存0秒時間**：影片載入時的初始暫停狀態不會被記憶為0秒
- **只在真正播放時記憶時間**：只有在用戶實際開始播放後才會開始記憶播放時間
- **智能恢復播放位置**：
  - 大於5秒的時間會自動跳轉到該位置
  - 小於5秒的時間會記錄但不自動跳轉
  - 0秒或無效時間會從頭開始播放
- **播放狀態追蹤**：追蹤是否已經開始過播放，避免在初始載入時儲存無效時間

### 🔧 技術改進
- 新增 `hasStartedPlaying` 狀態追蹤
- 新增 `initialLoadComplete` 狀態追蹤
- 改進自動儲存邏輯，只在播放時儲存
- 優化時間記憶閾值（大於0.5秒才儲存）

## 功能特色

### 🎬 影片播放控制
- **智能播放控制**：播放/暫停、前進/後退、重置
- **播放速度調整**：0.25x 到 2x 多種速度選擇
- **鍵盤快捷鍵**：空白鍵播放/暫停，方向鍵跳轉
- **進度記憶**：自動記住上次播放位置

### 📊 計數器功能
- **雙版本設計**：手機版浮動面板 + 桌機版固定按鈕
- **即時計數**：點擊或按Enter鍵增加計數
- **重置功能**：按Delete鍵或點擊重置按鈕
- **自動儲存**：計數器數值自動保存到本機

### 💾 資料儲存
- **本機儲存**：使用localStorage保存進度和計數
- **自動備份**：定期自動保存播放位置和計數
- **狀態恢復**：重新載入頁面時自動恢復上次狀態

### 📱 響應式設計
- **手機版**：浮動控制列 + 可收合計數器面板
- **桌機版**：固定控制列 + 內建計數器按鈕
- **自適應佈局**：根據螢幕大小自動調整

## 使用方式

### 基本操作
1. **播放控制**：點擊播放按鈕或按空白鍵
2. **跳轉**：使用方向鍵或點擊前進/後退按鈕
3. **速度調整**：使用下拉選單或 +/- 鍵
4. **計數**：點擊計數器或按Enter鍵
5. **重置**：點擊重置按鈕或按Delete鍵

### 時間記憶功能
- 影片會在播放時自動記憶當前位置
- 重新載入頁面時會自動恢復到上次播放位置
- 重置按鈕會清除記憶並從頭開始播放

## 技術架構

### 核心類別
- `AppState`：應用程式狀態管理
- `YouTubePlayerManager`：YouTube播放器控制
- `CounterManager`：計數器功能管理
- `LocalStorageManager`：本機儲存管理
- `UIManager`：使用者介面更新
- `TimeManager`：時間更新管理
- `SpeedController`：播放速度控制
- `EventManager`：事件處理管理

### 儲存機制
- 使用localStorage進行本機儲存
- 自動定期保存播放位置和計數
- 頁面關閉時自動保存當前狀態

## 瀏覽器支援
- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+

## 本地開發

1. 克隆專案
```bash
git clone [repository-url]
cd Medicine-Buddha-Mantra
```

2. 啟動本地伺服器
```bash
python3 -m http.server 8000
# 或
npx serve .
```

3. 開啟瀏覽器訪問 `http://localhost:8000`

## 注意事項

- 需要網路連線以載入YouTube影片
- 建議使用現代瀏覽器以獲得最佳體驗
- 本機儲存功能需要瀏覽器支援localStorage
- 計數器和播放進度會自動保存到瀏覽器本機儲存

## 授權

本專案採用 MIT 授權條款。
