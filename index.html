<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>藥師咒 - 梵咒助唸器</title>
    <!-- Google Fonts for better Sanskrit character support -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;600;700&family=Noto+Serif+Devanagari:wght@400;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css?v=1.0">
    
    <!-- Google Analytics -->
    <script src="ga-config.js"></script>
    <script>
        // 初始化 Google Analytics
        initGoogleAnalytics();
    </script>
    
    <script src="https://www.youtube.com/iframe_api"></script>
</head>
<body>
    <!-- 現代化播放器控制列 -->
    <div class="video-controls" id="videoControls">
        <!-- 手機版左側區域 -->
        <div class="mobile-left">
            <button class="control-btn" data-action="reset" title="重新播放">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"></path>
                </svg>
            </button>
            <div class="current-time" id="currentTime">00:00</div>
        </div>
        
        <!-- 手機版中央區域 -->
        <div class="mobile-center">
            <button class="control-btn" data-action="seek" data-value="-2" title="後退 2 秒">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path>
                </svg>
            </button>
            <button class="control-btn play-pause-btn" id="playPauseBtn" data-action="toggle" title="播放/暫停">
                <svg id="playIcon" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" style="display: block;">
                    <path d="M8 5v14l11-7z"></path>
                </svg>
                <svg id="pauseIcon" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
                    <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path>
                </svg>
            </button>
            <button class="control-btn" data-action="seek" data-value="2" title="前進 2 秒">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M16 18h2V6h-2zm-3.5-6L4 6v12z"></path>
                </svg>
            </button>
        </div>
        
        <!-- 手機版右側區域 -->
        <div class="mobile-right">
            <select class="speed-select" id="speedSelect" data-action="speed" title="播放速度">
                <option value="0.25">0.25×</option>
                <option value="0.5">0.5×</option>
                <option value="0.75">0.75×</option>
                <option value="1" selected>1×</option>
                <option value="1.25">1.25×</option>
                <option value="1.5">1.5×</option>
                <option value="1.75">1.75×</option>
                <option value="2">2×</option>
            </select>
            <!-- 手機版計數器觸發按鈕 -->
            <button class="control-btn counter-toggle-btn mobile-only" id="counterToggleBtn" title="顯示/隱藏計數器">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"></path>
                </svg>
            </button>
        </div>
        
        <!-- 桌機版元素（手機版下隱藏） -->
        <!-- 重新播放 -->
        <div>
            <button class="control-btn" data-action="reset" title="重新播放">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"></path>
                </svg>
            </button>
            <div class="helper-text">R 鍵</div>
        </div>
        
        <!-- 時間顯示 -->
        <div class="current-time" id="currentTimeDesktop">00:00</div>
        
        <!-- 後退 -->
        <div>
            <button class="control-btn" data-action="seek" data-value="-2" title="後退 2 秒">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path>
                </svg>
            </button>
            <div class="helper-text">← 或 [</div>
        </div>
        
        <!-- 播放/暫停 -->
        <div>
            <button class="control-btn play-pause-btn" id="playPauseBtnDesktop" data-action="toggle" title="播放/暫停">
                <svg id="playIconDesktop" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" style="display: block;">
                    <path d="M8 5v14l11-7z"></path>
                </svg>
                <svg id="pauseIconDesktop" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
                    <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path>
                </svg>
            </button>
            <div class="helper-text">空白鍵</div>
        </div>
        
        <!-- 前進 -->
        <div>
            <button class="control-btn" data-action="seek" data-value="2" title="前進 2 秒">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M16 18h2V6h-2zm-3.5-6L4 6v12z"></path>
                </svg>
            </button>
            <div class="helper-text">→ 或 ]</div>
        </div>
        
        <!-- 速度控制 -->
        <div>
            <select class="speed-select" id="speedSelectDesktop" data-action="speed" title="播放速度">
                <option value="0.25">0.25×</option>
                <option value="0.5">0.5×</option>
                <option value="0.75">0.75×</option>
                <option value="1" selected>1×</option>
                <option value="1.25">1.25×</option>
                <option value="1.5">1.5×</option>
                <option value="1.75">1.75×</option>
                <option value="2">2×</option>
            </select>
            <div class="helper-text">- + 鍵</div>
        </div>

        <!-- 桌機版計數器 -->
        <div class="desktop-counter">
            <div>
                <button class="control-btn counter-btn" id="counterBtnDesktop">
                    <span class="counter-number">0</span>
                </button>
                <div class="helper-text">Enter</div>
            </div>
            <div>
                <button class="control-btn reset-btn" id="resetCounterDesktop" title="重設計數">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M22,3H7c-0.69,0-1.23,0.35-1.59,0.88L0,12l5.41,8.12C5.77,20.65,6.31,21,7,21h15c1.1,0,2-0.9,2-2V5C24,3.9,23.1,3,22,3z M18,16.59L16.59,18L12,13.41L7.41,18L6,16.59L10.59,12L6,7.41L7.41,6L12,10.59L16.59,6L18,7.41L13.41,12L18,16.59z"></path>
                    </svg>
                </button>
                <div class="helper-text">Del</div>
            </div>
        </div>
    </div>
    
    <!-- 手機版浮動計數器面板 -->
    <div class="counter-panel" id="counterPanel">
        <div class="counter-display">
            <!-- 計數器主要區域 -->
            <div class="counter-main" id="counterMain">
                <span class="counter-number">0</span>
            </div>
            
            <!-- 分隔線 -->
            <div class="separator"></div>
            
            <!-- Reset 按鈕區域 -->
            <div class="reset-area" id="resetArea">
                <button class="reset-btn" id="resetCounter" title="重設計數">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>
    
    <!-- 標題 -->
    <h1 class="main-title">梵咒助唸器</h1>
    
    <div class="container">
        <!-- 儲存狀態提示（僅在載入時短暫顯示） -->
        <div class="storage-status" id="storageStatus" style="display: none;">
            <div class="status-content">
                <span class="status-icon">💾</span>
                <span class="status-text" id="statusText">正在載入保存的進度...</span>
            </div>
        </div>
        
        <div class="main-content vertical-mode" id="mainContent">
            <!-- 左側：影片區域 -->
            <div class="left-section">
                <div class="video-section">
                    <div class="banner-scroll-fade">《藥師咒》</div>
                    
                    <div class="video-container">
                        <iframe id="youtubePlayer" 
                                frameborder="0" 
                                allowfullscreen 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                referrerpolicy="strict-origin-when-cross-origin" 
                                title="108篇藥師咒、藥師灌頂真言 (梵音)" 
                                width="100%" 
                                height="100%" 
                                src="https://www.youtube.com/embed/oayy63pHCAA?enablejsapi=1&rel=0&modestbranding=1&controls=0&disablekb=1&playsinline=1&iv_load_policy=3&fs=0">
                        </iframe>
                    </div>
                </div>
            </div>
            
            <!-- 右側：梵字全文 -->
            <div class="right-section">
                <div class="mantra-content">
                    <div class="mantra-section">
                        <div class="word-group">
                            <div class="romanization"><span class="voiced">na</span> - <span class="voiced">mo</span></div>
                            <div class="chinese">禮敬</div>
                        </div>
                        
                        <div class="word-group">
                            <div class="romanization"><span class="voiced">bha</span> - <span class="voiced">ga</span> - <span class="voiced">va</span> - <span class="voiced-pronunciation">te</span></div>
                            <div class="chinese">世尊</div>
                        </div>
                    </div>
                    
                    <div class="mantra-section">
                        <div class="word-group">
                            <div class="romanization"><span class="voiced">bhai</span> - <span class="voiceless">ṣa</span> - <span class="voiced">jya</span> - <span class="voiced">gu</span> - <span class="voiced">ru</span></div>
                            <div class="chinese">藥師</div>
                        </div>
                        
                        <div class="word-group">
                            <div class="romanization"><span class="voiced">vai</span> - <span class="voiced">ḍū</span> - <span class="voiced">rya</span></div>
                            <div class="chinese">琉璃</div>
                        </div>
                        
                        <div class="word-group">
                            <div class="romanization"><span class="voiceless">pra</span> - <span class="voiced">bhā</span></div>
                            <div class="chinese">光</div>
                        </div>
                        
                        <div class="word-group">
                            <div class="romanization"><span class="voiced">rā</span> - <span class="voiced">jā</span> - <span class="voiced">ya</span></div>
                            <div class="chinese">王</div>
                        </div>
                    </div>
                    
                    <div class="mantra-section">
                        <div class="word-group">
                            <div class="romanization"><span class="voiced-pronunciation">ta</span> - <span class="voiceless">thā</span> - <span class="voiced">ga</span> - <span class="voiced-pronunciation">tā</span> - <span class="voiced">ya</span></div>
                            <div class="chinese">如來</div>
                        </div>
                        
                        <div class="word-group">
                            <div class="romanization"><span class="voiced">ar</span> - <span class="voiceless">ha</span> - <span class="voiced-pronunciation">te</span></div>
                            <div class="chinese">應供</div>
                        </div>
                        
                        <div class="word-group">
                            <div class="romanization"><span class="voiceless">sam</span> - <span class="voiced">yak</span> - <span class="voiceless">saṃ</span> - <span class="voiced">bu</span> - <span class="voiced">ddhā</span> - <span class="voiced">ya</span></div>
                            <div class="chinese">正等覺</div>
                        </div>
                    </div>
                    
                    <div class="mantra-section">
                        <div class="word-group">
                            <div class="romanization"><span class="voiced-pronunciation">tad</span> - <span class="voiced">ya</span> - <span class="voiceless">thā</span></div>
                            <div class="chinese">即說咒曰：</div>
                        </div>
                    </div>
                    
                    <div class="separator"></div>
                    
                    <div class="mantra-section">
                        <div class="word-group">
                            <div class="romanization"><span class="voiced">oṃ</span></div>
                            <div class="chinese">嗡！</div>
                        </div>
                        
                        <div class="word-group">
                            <div class="romanization"><span class="voiced">bhai</span> - <span class="voiceless">ṣa</span> - <span class="voiced">jye</span></div>
                            <div class="chinese">藥！</div>
                        </div>
                        
                        <div class="word-group">
                            <div class="romanization"><span class="voiced">bhai</span> - <span class="voiceless">ṣa</span> - <span class="voiced">jye</span></div>
                            <div class="chinese">藥！</div>
                        </div>
                    </div>
                    
                    <div class="mantra-section">
                        <div class="word-group">
                            <div class="romanization"><span class="voiced">bhai</span> - <span class="voiceless">ṣa</span> - <span class="voiced">jya</span></div>
                            <div class="chinese">藥</div>
                        </div>
                        
                        <div class="word-group">
                            <div class="romanization"><span class="voiceless">sa</span> - <span class="voiced">mud</span> - <span class="voiced">ga</span> - <span class="voiced-pronunciation">te</span></div>
                            <div class="chinese">生起來！</div>
                        </div>
                        
                        <div class="word-group">
                            <div class="romanization"><span class="voiceless">svā</span> - <span class="voiceless">hā</span></div>
                            <div class="chinese">成就！</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 清除資料按鈕（隱藏，僅供調試用） -->
        <div class="debug-controls" id="debugControls" style="display: none;">
            <button class="debug-btn" onclick="clearAllData()" title="清除所有保存的資料">清除資料</button>
            <button class="debug-btn" onclick="showStorageInfo()" title="顯示儲存資訊">儲存資訊</button>
        </div>
        
        <!-- 梵文發音說明區塊 -->        
        <div class="section-title">梵文發音說明</div>
        
        <div class="guide-content">
            <div class="guide-section">
                <h3>清音與濁音</h3>
                <div class="explanation">
                    <p><strong>清音（voiceless）</strong>：發音時聲帶不振動的音，氣流較強。在梵文中包括 p、t、k、c、ṭ、ś、ṣ、s、h 等音。</p>
                    <p><strong>濁音（voiced）</strong>：發音時聲帶振動的音，聲音較為飽滿。在梵文中包括 b、d、g、j、ḍ、m、n、ṅ、ñ、ṇ、y、r、l、v 等音。</p>
                    <p class="note">在上方咒文中，清音以<span class="voiced">藍色</span>標示，濁音以<span class="voiceless">紅色</span>標示。</p>
                </div>
            </div>
            
            <div class="guide-section">
                <h3>梵文「t」音的發音說明</h3>
                <div class="explanation">
                    <p><strong>發音規則</strong>：梵文中的「t」要發<strong>「d」音</strong>。</p>
                    <p><strong>應用實例</strong>：如「<span class="voiced-pronunciation">tad</span>」念成「dad」、「<span class="voiced-pronunciation">te</span>」念成「de」。</p>
                    <p class="note">咒文中會在「t」字母上方標註「d」來幫助念誦，讓您一目了然正確的發音方式。</p>
                </div>
            </div>
            
            <div class="guide-section">
                <h3>修持建議</h3>
                <div class="explanation">
                    <p>梵文咒語的力量不僅來自於正確的發音，更重要的是內心的虔誠與專注。建議：</p>
                    <ul>
                        <li>初學時可放慢速度，仔細體會每個音節的發音位置。</li>
                        <li>逐漸培養對梵音自然韻律的感受</li>
                        <li>在理解發音規則的基礎上，讓念誦變得自然流暢。</li>
                        <li>保持內心清淨，以恭敬心念誦。</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Portaly 支持區塊 - 獨立區塊 -->
    <div class="support-section">
        <div class="cta-title">護持網站</div>
        <div class="cta-symbol-container">
            <span class="cta-symbol">❁ ◈ ❁</span>
        </div>
        <div class="support-content">
            <div class="support-text">
                <p>如果這個藥師咒學習工具對您有幫助<br>歡迎給予支持 🙏</p>
                <p class="cta-shared-note">您的支持將幫助我們維護網站、改善功能<br>更多人受益於佛法智慧</p>
            </div>
            <div class="portaly-container">
                <!-- 請用你的 Portaly 使用者名稱替換 "yourusername" -->
                <a href="https://portaly.cc/mantra/support" target="_blank" class="portaly-btn">
                    <div class="portaly-btn-content">
                        <span class="portaly-icon">ॐ</span>
                        <span class="portaly-text">立即護持</span>
                    </div>
                </a>
            </div>
        </div>
    </div>
    
    <!-- 聯絡開發者區塊 - 獨立區塊 -->
    <div class="contact-section">
        <div class="cta-title">聯絡我們</div>
        <div class="cta-symbol-container">
            <span class="cta-symbol">❁ ◈ ❁</span>
        </div>
        <div class="contact-content">
            <div class="contact-text">
                <p>對於功能建議、使用問題或任何意見回饋，歡迎與我們聯絡 ✉️</p>
                <p class="cta-shared-note">即便是小小的鼓勵也能帶來支持的力量</p>
            </div>
            <div class="contact-button-container">
                <a href="mailto:jystudiox@gmail.com?subject=【藥師咒助念器】意見回饋&body=感謝您使用藥師咒助念器！%0A%0A請在此描述您的問題或建議：%0A%0A" class="contact-btn">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" class="contact-icon">
                        <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.89 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                    </svg>
                    <span>聯絡站主</span>
                </a>
            </div>
        </div>
    </div>

    <!-- 載入分離的 JavaScript 檔案 -->
    <script src="scripts.js"></script>
</body>
</html>